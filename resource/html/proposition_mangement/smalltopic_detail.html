<!DOCTYPE html>
<html lang="ZH-cn" data-identity="88">
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0,minimum-scale=1, maximum-scale=1, user-scalable=no">
    <title>小命题管理——命题详情</title>
    <link rel="stylesheet" href="../../assets/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="../../assets/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="../../assets/css/cmui.min.css"/>
    <link rel="stylesheet" href="../../assets/css/base.min.css"/>
    <link rel="stylesheet" href="../../assets/css/innerbase.min.css"/>
    <!--[if lt IE 9]>
    <script src="../../assets/lib/html5shiv.js"></script>
    <script src="../../assets/lib/respond.min.js"></script>
    <![endif]-->
    <style>
        a {
            cursor: pointer
        }

        .btn-blue.w100 {
            width: 120px;
            font-size: 14px;
            height: 30px;
            line-height: 28px;
        }

        /*弹窗     start*/
        .dialog-sm .w560 {
            width: 560px;
        }

        .table-indent tr > td:first-child {
            text-indent: 0;
        }

        .table > tbody > tr > td {
            line-height: 20px;
        }

        /*弹窗     end*/
    </style>
</head>
<body>
<div class="main-container">
    <ol class="breadcrumb">
        <li>命题管理</li>
        <li>小命题管理</li>
        <li>命题详情</li>
    </ol>
    <div class="tile mt-30">
        <div class="module-header clearfix">
            <h4>命题详情<a href="smalltopic_list.html" class="btn-default w80 pull-right">返回</a></h4>
        </div>
        <div class="tile-content">
            <div>
                <ul class="proList con-detail mt-40">
                    <li>
                        <span>命题ID：</span>
                        <div class="topicID">
                            1234567890
                        </div>
                    </li>
                    <li>
                        <span>命题类型：</span>
                        <div>小命题</div>
                    </li>
                    <li>
                        <span>命题名称：</span>
                        <div>基于MRE和MRO数据联合分析的LTE邻区配置及切换性能分析与优化算法及工具</div>
                    </li>
                    <li>
                        <span>发榜单位：</span>
                        <div>咪咕公司</div>
                    </li>
                    <li>
                        <span>创建人：</span>
                        <div>谁谁谁</div>
                    </li>
                    <li>
                        <span>创建时间：</span>
                        <div>2016.12.08 18:00</div>
                    </li>
                    <li>
                        <span>发布时间：</span>
                        <div>2016.12.08 18:00</div>
                    </li>
                    <li>
                        <span>命题状态：</span>
                        <div>正在打榜 <a class="ml-20" data-toggle="modal" data-target="#assignment">变更命题状态</a></div>
                    </li>
                    <li>
                        <span>浏览次数：</span>
                        <div>
                            <p>200次</p>
                        </div>
                    </li>
                    <li>
                        <span>打榜次数：</span>
                        <div>100次 <a class="ml-20" href="smalldabang_detail.html">查看详情</a></div>
                    </li>
                    <li>
                        <span>项目领域：</span>
                        <div style="margin-bottom: 0px;"><span style="width: auto;">业务</span>|<span>家庭业务</span></div>
                    </li>
                    <li>
                        <span>联系人：</span>
                        <div>管理员</div>
                    </li>
                    <li>
                        <span>联系电话：</span>
                        <div>17777777777</div>
                    </li>
                    <li>
                        <span>联系邮箱：</span>
                        <div>admin@chinamobile.com</div>
                    </li>
                    <li>
                        <span>悬赏人：</span>
                        <div>总经理</div>
                    </li>
                    <li>
                        <span>命题奖金：</span>
                        <div>15,000元</div>
                    </li>
                    <li>
                        <span>完成时限：</span>
                        <div>九个月</div>
                    </li>
                    <li>
                        <span>打榜有效期：</span>
                        <div>2016.08.20 19:00</div>
                    </li>
                    <li>
                        <span>命题阐述：</span>
                        <div>
                            MRE数据里面包含丰富的启测事件和切换事件（包括已配邻区和未配邻区），还包括在启测时本小区电平以及在切换事件触发时，本小区测量到的邻小区电平值。联合MRO和MRE数据，通过对事件的模式匹配、用户聚类和场景判别，可以实现对于邻区配置和切换性能的优化，与MRO数据类似，如果与OTT数据关联则可以进行切换带的呈现。主要实现四个功能：1、邻区配置优化；2、切换质量的分析；3、切换参数优化调整；4、切换带的定位和呈现。
                        </div>
                    </li>
                    <li>
                        <span>提出背景：</span>
                        <div>
                            切换成功率、切换及时性、切换质量和切换性能直接或间接影响用户的LTE数据下载速率和VOLTE语音MOS值。现有的LTE邻区配置是基于地理位置、邻区对切换次数、或者单独基于MRO采样点进行，存在下列问题：1、地理位置不贴近终端实测，只能用于建网初期；2、邻区切换次数需要厂家私有counter支持且不支持对于邻区漏配的判断；3、基于MRO采样点并不能真实反映启测和切换事件情况且受限于5秒采样周期。而联合MRE数据进行联合分析，则可以有效解决上述问题，通过一揽子优化分析步骤，实现更准确的切换优化。
                        </div>
                    </li>
                    <li>
                        <span>验收指标：</span>
                        <div>通过该优化工具有效提高切换成功率、提高切换质量，提高LTE下载速率，提高VOLTE MOS值。</div>
                    </li>
                    <li>
                        <span></span>
                        <div>
                            <a class="btn-blue w100 mr-15" href="smalltopic_edit.html">修改命题内容</a><a
                                class="btn-blue w100 mr-15" data-toggle="modal" data-target="#delete_dialog">删除命题</a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!--变更状态弹窗      start-->
    <div class="modal fade dialog-sm" id="assignment" data-backdrop="static">
        <div class="modal-dialog w560">
            <div class="modal-content bd-muted">
                <div class="modal-header bg-muted bd-muted">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h5 class="modal-title text-left">变更状态</h5>
                </div>
                <div class="modal-body">
                    <p class="text-left">是否确定对以下命题进行状态变更：</p>
                    <table class="table table-bordered-noheader">
                        <tr>
                            <td>ID</td>
                            <td>类型</td>
                            <td>名称</td>
                        </tr>
                        <tr>
                            <td>${extendReqDetail.requirementId}</td>
                            <td>${extendReqDetail.statementName}</td>
                            <td>${extendReqDetail.rName}</td>
                        </tr>
                    </table>
                    <p class="text-left">
                        状态变更为：
                        <select>
                            <c:if test="${not empty statusNamesList}">
                                <c:forEach items="${statusNamesList }" var="var">
                                    <option value="${var.type}">${var.statusName}</option>
                                </c:forEach>
                            </c:if>
                        </select>
                    </p>
                    <p class="text-left">
                        批量设置权限：<span>${userName}/${userRelname}</span>
                    </p>
                    <div>
                        <button class="btn-blue w80" id="statechange">确定</button>
                        <button class="btn-default w80" data-dismiss="modal">取消</button>
                    </div>
                </div>

            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>
    <!--变更状态弹窗     end-->
    <!--确认删除弹窗      start-->
    <div class="modal fade dialog-sm" id="delete_dialog" data-backdrop="static">
        <div class="modal-dialog w560">
            <div class="modal-content bd-muted">
                <div class="modal-header bg-muted bd-muted">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h5 class="modal-title text-left">确定删除</h5>
                </div>
                <div class="modal-body">
                    <p class="text-left">是否确定删除以下命题：</p>
                    <table class="table text-center table-bordered-noheader">
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>类型</th>
                            <th>名称</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>12345678</td>
                            <td>小命题</td>
                            <td>基于wifi方式的室内定位方法及产品研发</td>
                        </tr>
                        </tbody>
                    </table>
                    <p class="text-left">
                        批量设置权限：<span>司家庆</span>
                    </p>
                    <div>
                        <p class="text-left">注意：</p>
                        <p class="text-left">只有已结束的命题可以被删除。</p>
                        <p class="text-left">删除命题后，网站不再显示该命题，系统中不再保留该命题信息及关联内容。</p>
                        <p class="text-left">删除操作不可恢复。</p>
                    </div>
                    <div>
                        <button class="btn-blue w80" id="del">确定</button>
                        <button class="btn-default w80" data-dismiss="modal">取消</button>
                    </div>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>
    <!--确认删除弹窗     end-->
    <!--删除成功 success     start-->
    <div class="modal fade dialog-sm" id="change_success" data-backdrop="static">
        <div class="modal-dialog w560">
            <div class="modal-content bd-muted">
                <div class="modal-header bg-muted bd-muted">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h5 class="modal-title text-left">提示</h5>
                </div>
                <div class="modal-body">
                    <h3 class="green mt-15 mb-20">删除成功！</h3>
                    <div class="mt-20">
                        <a class="btn-blue w80" href="" data-dismiss="modal" id="success_sure">确定</a>
                    </div>
                </div>

            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>
    <!--删除成功 success     end-->
    <!--删除失败 error     start-->
    <div class="modal fade dialog-sm" id="change_error" data-backdrop="static">
        <div class="modal-dialog w560">
            <div class="modal-content bd-muted">
                <div class="modal-header bg-muted bd-muted">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h5 class="modal-title text-left">提示</h5>
                </div>
                <div class="modal-body">
                    <h3 class="green mt-15 mb-20">删除失败！</h3>
                    <p>Error Code：XXXXXXXXXXXXXXXXX</p>
                    <div class="mt-20">
                        <a class="btn-blue w80" href="" data-dismiss="modal" id="error_sure">确定</a>
                    </div>
                </div>

            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>
    <!--删除失败 error     end-->
</div>
<script src="../../assets/lib/require.js"></script>
<script src="../../assets/js/config.js"></script>
<script>
    require(["common", "bootstrap", "jqPaginator"], function () {
        //	变更状态     start
        $("#statechange").on("click", function () {
            var selID = $('.topicID').text();
            var requirementId = selID;
            var arr = new Array(requirementId);
            var statusArr = new Array("${extendReqDetail.statusName}");
            var status = $('#assignment').find("select").val();
            var statusName = $("#assignment").find("option:selected").text();
            $("#assignment").modal("hide");
            $.ajax({
                url: '${ctx}/extendReq/reqBatchUpdate',
                type: 'post',
                data: {"requirementIds": arr, "status": status, "statusName": statusName, "statusArr": statusArr},
                dataType: 'text',
                success: function (data) {
                    if (data == "ok") {
                        $("#change_success").modal("show");
                        $("#change_success h3").text("变更成功！");
                        $("#change_success a").attr({
                            "href": "", //当前页面链接
                            "data-dismiss": ""
                        });
                    } else {
                        $("#change_error").modal("show");
                        $("#change_error h3").text("变更失败！");
                        $("#change_error a").attr({
                            "href": "",
                            "data-dismiss": "modal"
                        });
                        $("#change_error p").text("Error Code：code");
                    }
                },
                error: function () {
                    alert('操作失败：变更失败！');
                }
            })
        });
        //	变更状态     end
        //  删除命题     start
        $("#del").on("click", function () {
            var selID = $('.topicID').text();
            $("#delete_dialog").modal("hide");
            $.ajax({
                url: 'json.json',
                type: 'post',
                data: selID,
                dataType: '',
                success: function (data) {
                    if (data.msg == "success") {
                        $("#change_success").modal("show");
                        $("#change_success a").attr({
                            "href": "bigtopic_list.html",
                            "data-dismiss": ""
                        });

                    } else {
                        $("#change_error").modal("show");
                        $("#change_error a").attr({
                            "href": "",
                            "data-dismiss": "modal"
                        });
                        $("#change_error p").text("Error Code：code");
                    }
                },
                error: function () {
                    alert('操作失败：Error CodeXXXX');
                    window.location.href = "";
                }
            })
        });
        //  删除命题     end
    });
</script>
</body>
</html>