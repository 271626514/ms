<!DOCTYPE html>
<html lang="ZH-cn" data-identity="77">
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0,minimum-scale=1, maximum-scale=1, user-scalable=no">
    <title>资讯管理</title>

    <link rel="stylesheet" href="../../assets/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="../../assets/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="../../assets/css/cmui.min.css"/>
    <link rel="stylesheet" href="../../assets/css/base.min.css"/>
    <link rel="stylesheet" href="../../assets/css/innerbase.min.css"/>

    <!--[if lt IE 9]>
    <script src="../../assets/lib/html5shiv.js"></script>
    <script src="../../assets/lib/respond.min.js"></script>
    <![endif]-->
    <style>
        .module-header h4 {
            border-bottom: 2px solid #eceff9;
            padding-bottom: 16px;
        }

        .searchTitle {
            font-size: 14px;
            color: #999;
        }

        .table thead tr {
            height: 40px;
        }

        .table > thead > tr > th {
            line-height: 24px;
        }

        .table-indent th:first-child, .table-indent tr > td:first-child {
            text-indent: 0;
        }

        .table > tbody > tr > td.green {
            color: #5dd599;
        }

        .table td a {
            padding: 0 3px;
        }

        .table label {
            font-weight: 400;
        }

        .module-header h4 {
            border-bottom: 2px solid #eceff9;
            padding-bottom: 16px;
        }

        .form-bg {
            padding: 15px 0;
            background: #f6f7fb;
        }

        .form input.white-bg[type=text] {
            background: #fff;
        }

        .red {
            color: #ff5021;
        }
    </style>
</head>
<body>
<div class="main-container">
    <ol class="breadcrumb">
        <li>WEB内容管理</li>
        <li>资讯管理</li>
    </ol>
    <div class="">
        <div class="module-header">
            <h4>资讯列表
                <a href="./info_new.html" class="btn-blue w80 pull-right">新建资讯</a>
            </h4>
        </div>
        <form class="form searchForm">
            <div class="form-group mt-20 form-bg">
                <input type="text" class="white-bg ml-20 mr-20" placeholder="支持按标题模糊搜索"/>
                <button type="submit" class="btn-blue w80">搜索</button>
                <a class="resetTitle">重置</a>
            </div>
            <p class="searchTitle">已查找到 <span class="red">x</span>条数据</p>
            <div class="tile-content mt-20">
                <div class="table-responsive">
                    <table id="list" class="table table-indent text-center table-bordered-noheader">
                        <thead>
                        <tr>
                            <th>编号</th>
                            <th>标题</th>
                            <th>分类</th>
                            <th>发布者</th>
                            <th>发布状态</th>
                            <th>发布时间</th>
                            <th>编辑时间</th>
                            <th>操作</th>
                        </tr>
                        </thead>
                        <tbody id="itemContainer">
                        <tr data-id="2">
                            <td>1</td>
                            <td>新一期的开发者大赛开幕啦！</td>
                            <td>新闻热点</td>
                            <td>sh001</td>
                            <td>已保存</td>
                            <td></td>
                            <td>2016-07-09 12:36</td>
                            <td>
                                <a href="javascript:;">查看</a>
                                <a href="javascript:;">修改</a>
                                <a class="del" href="javascript:;">删除</a>
                            </td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>万众一心、众志成城</td>
                            <td>行业动态</td>
                            <td>sh002</td>
                            <td class="green">待发布</td>
                            <td>2016-07-09 18:36</td>
                            <td>2016-07-09 12:36</td>
                            <td>
                                <a href="javascript:;">查看</a>
                                <a href="javascript:;">修改</a>
                                <a class="del" href="javascript:;">删除</a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="data-page text-center page">
                    <div class="holder pagination" id="pagination"></div>
                </div>
            </div>
        </form>
    </div>

    <!--删除项目对话框-->
    <div class="modal fade dialog-sm" id="rempro-dialog" data-backdrop="static">
        <div class="modal-dialog">
            <div class="modal-content bd-muted" style="padding: 0 0 20px 0;">
                <div class="modal-header bg-muted">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h5 class="modal-title">提示</h5>
                </div>
                <div class="modal-body">
                    <div class="text-center con">
                        <p>是否删除该项目？</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-green w70" data-dismiss="modal" id="removeproject" data-dataid="">确定</button>
                    <button class="btn-default w70 ml-10" data-dismiss="modal">取消</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->

    </div>
    <!--删除成功-->
    <div class="modal fade dialog-sm" id="del-success" data-backdrop="static">
        <div class="modal-dialog">
            <div class="modal-content bd-muted" style="padding: 0 0 20px 0;">
                <div class="modal-header bg-muted">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h5 class="modal-title">提示</h5>
                </div>
                <div class="modal-body">
                    <!--<h3 class="text-info-green">删除成功！</h3>-->
                    <div class="text-center con">
                        <p>删除成功！</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--删除失败-->
    <div class="modal fade dialog-sm" id="del-fail" data-backdrop="static">
        <div class="modal-dialog">
            <div class="modal-content bd-muted" style="padding: 0 0 20px 0;">
                <div class="modal-header bg-muted">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h5 class="modal-title">提示</h5>
                </div>
                <div class="modal-body">
                    <!--<h3 class="text-info-green">删除失败！</h3>-->
                    <div class="text-center con">
                        <p>删除失败！</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../../assets/lib/require.js"></script>
<script src="../../assets/js/config.js"></script>
<script>
    require(["common", "bootstrap", "jqPaginator"], function () {
        //	分页 start
        var totalPages = 4;
        if (totalPages == 0) {
            var html = "<p class='no-show mt-20'>没有搜到符合的项目</p>";
            $('#itemContainer').append(html);
        } else {
            $.jqPaginator('#pagination', {
                totalPages: totalPages,
                visiblePages: 5,
                currentPage: 1,
                onPageChange: function (n) {
                    /* location.href = '${ctx}/raisestRaiseProject?industry='+$("[name='industry'] :selected").val()
                     +'&supportSort='+$("[name='supportSort'] :selected").val()
                     +'&moneySort='+$("[name='moneySort'] :selected").val()
                     +'&pageNum=' + n;  */
                    //						$("[name='pageNum']").val(n);
                    //						$("#search_form").submit();
                }
            });
        }
        //	分页 end

        $('.resetTitle').on('click', function () {
            $('.searchForm')[0].reset();
        });

        $(".del").on("click", function () {
            var delId = $(this).parents("tr").data("id");
            $("#rempro-dialog").modal("show");
            $("#removeproject").attr("data-id", delId);
        });
        $("#removeproject").on("click", function () {
            var delId = $(this).data("id");
            $.ajax({
                type: "post",
                url: "",
//      		url:"${ctx}/news/newsDel/"+delId",
                success: function (data) {
                    if (data) {
                        $("#del-success").modal("show");
                    } else {
                        $("#del-fail").modal("show");
                    }
                },
                error: function () {

                }
            });

        });
    });
</script>
</body>
</html>